\documentclass[11pt]{article}
\usepackage{newcent}
\usepackage[english]{babel}
\usepackage[letterpaper]{geometry}

\def\cmd#1#2{\noindent {\bf #1} #2\par}
\def\expl#1{\begin{itemize}\item[]#1\end{itemize}}
\def\cref#1{{\bf #1}}
\def\bar{{$|$}}
\def\nyi{{\par\bf\itshape Not yet implemented.}}

\begin{document}
\section{Commands}
Optional arguments are given in parentheses. Vertical bars indicate
alternatives.\bigskip

\cmd{align}{left\bar{}right\bar{}center\bar{}top\bar{}bottom\bar{}middle\bar{}base}
\expl{Sets horizontal and/or vertical alignment for subsequent text.}

\cmd{area}{[ \emph{dx$_1$ dx$_2$ \ldots} ] [ \emph{dy$_1$ dy$_2$ \ldots}
]}
\expl{Draws a polygon, filled using the current brush. 
  \emph{dx$_i$} and \emph{dy$_i$} are specified in
  points and are relative to the position set by \cref{at}. Note that
  the ``['' and ``]'' are literal brackets that separate the x- and 
  y-coordinates. See also \cref{patch}.}

\cmd{at}{\emph{x} \emph{y}}
\cmd{at}{\emph{x} \emph{y} \emph{$\xi$} \emph{$\eta$}}
\cmd{at}{\emph{x} \emph{y} \emph{$\phi$}}
\cmd{at}{--}
\expl{Places subsequent text and lines at graph
    position (\emph{x}, \emph{y}). If (\emph{$\xi$}, \emph{$\eta$})
    are given, this specifies a rotation such that the baseline of the
    text is in the direction of the vector (\emph{$\xi$},
    \emph{$\eta$}). This vector is specified in data
    coordinates. Alternatively, a rotation may be specified as a
    direct (clockwise) angle $\phi$. Besides a numeric value, \emph{x}
    may be one of left, right, center to place relative to the
    bounding box of the last drawn object (or group, see
    \cref{group}).
    Likewise, \emph{y} may be one of top, bottom, or middle. ``at --''
    places subsequent text and lines relative to the top left of the figure.}

\cmd{brush}{(\emph{ID}) \emph{color}\bar{}none\bar{}\emph{opacity} \ldots}
\expl{Selects a brush by \emph{ID}, defines its color (or sets it to
  ``none''), and/or its \emph{opacity} (as a number between 0 and 1).}

\cmd{figsize}{\emph{w} \emph{h}}
\expl{Sets the size of the figure to (\emph{w} x \emph{h})
  points. This should appear before any other commands.}

\cmd{font}{\emph{family} (bold) (italic) \emph{size}}
\expl{Selects a new font with a given family, point size, weight
  and/or slant.}

\cmd{fudge}{(\emph{margin})}
\cmd{fudge}{\emph{margin} \emph{ratio}}
\cmd{fudge}{-- \emph{ratio}}
\expl{Shrinks the axes as necessary so that all graphics and text fits
  within the bounding box of the figure as defined by
  \cref{figsize}. Margin is specified in points. Optional \emph{ratio}
specifies the desired aspect ratio of y:x data units.}

\cmd{group}{}
\cmd{endgroup}{}
\expl{Groups statements to accumulate bounding boxes for \cref{at}.}

\cmd{hairline}{1\bar0}
\expl{Enables or disables automatic drawing of zero-width hairlines
 over other lines.\nyi}

\cmd{image}{\emph{x y w h K} [ \emph{cdata} ]}
\expl{Renders an RGB image at given data location. \emph{cdata} is
  stored as (R,G,B) pixels in row order (unlike matlab's convention); 
   \emph{K} specifies
  the number of pixels per row. The length of \emph{cdata} must be an
  even multiple of 3\emph{K}. Values must be between 0 and 1.}

\cmd{line}{[ \emph{dx$_1$ dx$_2$ \ldots} ] [ \emph{dy$_1$ dy$_2$ \ldots} ]}
\expl{Draws a polyline. \emph{dx$_i$} and \emph{dy$_i$} are specified in
  points and are relative to the position set by \cref{at}. See also
  \cref{plot}.}

\cmd{panel}{\emph{ID} [\emph{x$_0$} \emph{y$_0$} \emph{w} \emph{h}] \bar{} --}
\expl{Defines a new panel with given ID to have its top left corner on
  paper position (\emph{x$_0$}, \emph{y$_0$}), in points, and size
  (\emph{w} x \emph{h}), in points. Or, reenters a previously defined
  panel. Or drops out to the top level. While drawing inside a panel,
  \cref{figsize} changes the size of the panel, and \cref{fudge}
  affects the panel rather than the figure as a whole. Also
  \cref{xaxis} and \cref{yaxis} affector the axes in the
  panel. Choices of pen, brush, font, etc., are not local to panels.
  \nyi}

\cmd{patch}{[ \emph{x$_1$ x$_2$ \ldots} ] [ \emph{y$_1$ y$_2$ \ldots} ]}
\expl{Draws a polygon, filled using the current brush. \emph{x$_i$}
  and \emph{y$_i$} are specified in data coordinates. See also \cref{area}.}

\cmd{pen}{(\emph{ID})
  \emph{color}\bar{}\emph{width}\bar{}miterjoin\bar{}beveljoin\bar{}roundjoin\bar{}flatcap\bar{}squarecap\bar{}roundcap\bar{}solid\bar\linebreak\mbox{}\kern25pt{}dash\bar{}dot\bar{}dashdot\bar{}dashdotdot\bar{}none
\ldots}
\expl{Selects a pen by \emph{ID}, defines its color, its width (in
  points), its join style, its cap style, and/or its dash
  pattern. Setting the color or width while the dash pattern is
  ``none'' automatically switches to ``solid.''}

\cmd{plot}{[ \emph{x$_1$ x$_2$ \ldots} ] [ \emph{y$_1$ y$_2$ \ldots}
]}
\expl{Draws a polyline. \emph{x$_i$}
  and \emph{y$_i$} are specified in data coordinates. See also
  \cref{line}.}

\cmd{reftext}{\emph{string}\bar{}--}
\expl{Sets or unsets a fixed text that will be used to calculate the
  ascent and descent of text for the ``bottom'' and ``top'' alignment
  modes.}

\cmd{text}{\emph{dx} \emph{dy} ''\emph{string}''}
\expl{Places the given text \emph{string} at the position (\emph{dx},
  \emph{dy}), specified in points relative to the anchor set by
  \cref{at}.\\
  Underscores and hats  make
  subscripts and superscripts (up to the next space). Slashes and
  asterisks make enclosed words appear in /italics/
  and *bold*. Unicode is supported. The string must be enclosed in single or double quotes.}

\cmd{xlim}{\emph{x$_0$} \emph{x$_1$}}
\expl{Fixes the limits of the x-axis. If no xlim is given, tight
  automatic axis limits apply.}

\cmd{ylim}{\emph{y$_0$} \emph{y$_1$}}
\expl{Fixes the limits of the y-axis.}

\section{Specifying data}

For specifying very long vectors or image data, the text-based ``[ a b c ... ]''
syntax may be cumbersome. Instead, you can write ``*\emph{n}'' and
place direct binary doubles after the command. Or you can write
``*uc\emph{n}'' and place direct binary uint8s after the command. The
matlab functions \cref{qplot} and \cref{qimage} give examples.

\section{User interface}

QPlot can be run on the command line, like this:
\begin{quotation}
qplot \emph{source} \emph{output}
\end{quotation}
 where \emph{source} is a file with commands and
\emph{output} can specify either pdf, svg, png, or tiff output. Output
can also be a postscript (.ps) file, in which case a single full page
is produced with the graph in the middle and crop marks around it.

QPlot can also be run interactively, like this:
\begin{quotation}
qplot \emph{source}
\end{quotation}
 In that case, graphics are rendered in a window. Keys ``+''
and ``-'' zoom in and out, ``0'' scales to fit, ``1'' scales to
100\%. ``E'' resizes the window to fit the whole scene. ``G'' toggles
between white and gray borders. ``Ctrl-Q'' quits. The graphics are
automatically rerendered if the \emph{source}
file changes on disk.

\end{document}

